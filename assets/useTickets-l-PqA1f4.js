import{u as c,b as u,c as a}from"./vendor-query-30WTYxUa.js";import{t as o}from"./queryKeys-D-dtdCA2.js";const l=()=>{try{const e=localStorage.getItem("matter-management-user");if(e)return JSON.parse(e).id}catch{}return"user-1"},r=[{id:"ticket-1",title:"Fix login bug",status:"open",priority:"high",createdAt:"2024-01-15T10:00:00Z",description:"Users cannot log in with their credentials. This is a critical issue affecting multiple users.",reporterId:"user-1",assigneeId:"user-2",dueDate:new Date(Date.now()+2*24*60*60*1e3).toISOString()},{id:"ticket-2",title:"Update dashboard UI",status:"in-progress",priority:"medium",createdAt:"2024-01-14T14:30:00Z",description:"Redesign the dashboard to match new brand guidelines. Include new color scheme and typography.",reporterId:"user-2",assigneeId:"user-1",dueDate:new Date(Date.now()+7*24*60*60*1e3).toISOString()},{id:"ticket-3",title:"Add dark mode",status:"closed",priority:"low",createdAt:"2024-01-10T09:15:00Z",description:"Implement dark mode theme across the application. Ensure all components support both themes.",reporterId:"user-1",assigneeId:"user-3",dueDate:new Date(Date.now()+15*24*60*60*1e3).toISOString()},{id:"ticket-4",title:"Optimize database queries",status:"open",priority:"critical",createdAt:"2024-01-12T11:20:00Z",description:"Improve performance of slow database queries. Add proper indexing and optimize joins.",reporterId:"user-3",assigneeId:"user-1",dueDate:new Date(Date.now()+1*24*60*60*1e3).toISOString()},{id:"ticket-5",title:"Implement user settings page",status:"open",priority:"medium",createdAt:"2024-01-16T08:00:00Z",description:"Create a user settings page for profile management and preferences.",reporterId:"user-2",assigneeId:"user-4",dueDate:new Date(Date.now()+14*24*60*60*1e3).toISOString()}];let y=6;const n=e=>new Promise(t=>setTimeout(t,e)),g=async e=>{await n(300);let t=[...r];if(e!=null&&e.search){const i=e.search.toLowerCase();t=t.filter(s=>{var d;return s.title.toLowerCase().includes(i)||((d=s.description)==null?void 0:d.toLowerCase().includes(i))})}if(e!=null&&e.status&&e.status!=="all"&&(t=t.filter(i=>i.status===e.status)),e!=null&&e.priority&&e.priority!=="all"&&(t=t.filter(i=>i.priority===e.priority)),e!=null&&e.assigneeId&&(t=t.filter(i=>i.assigneeId===e.assigneeId)),(e==null?void 0:e.sortBy)==="date")t.sort((i,s)=>new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime());else if((e==null?void 0:e.sortBy)==="title")t.sort((i,s)=>i.title.localeCompare(s.title));else if((e==null?void 0:e.sortBy)==="priority"){const i={critical:0,high:1,medium:2,low:3};t.sort((s,d)=>i[s.priority]-i[d.priority])}else(e==null?void 0:e.sortBy)==="dueDate"&&t.sort((i,s)=>i.dueDate?s.dueDate?new Date(i.dueDate).getTime()-new Date(s.dueDate).getTime():-1:1);return t},f=async e=>{await n(300);const t={id:`ticket-${y++}`,title:e.title,description:e.description||"",status:e.status||"open",priority:e.priority||"medium",reporterId:l(),assigneeId:e.assigneeId,dueDate:e.dueDate,createdAt:new Date().toISOString()};return r.push(t),t},w=async e=>{await n(300);const t=r.findIndex(s=>s.id===e.id);if(t===-1)throw new Error("Ticket not found");const i={...r[t],...e.title!==void 0&&{title:e.title},...e.description!==void 0&&{description:e.description},...e.status!==void 0&&{status:e.status},...e.priority!==void 0&&{priority:e.priority},...e.assigneeId!==void 0&&{assigneeId:e.assigneeId},...e.dueDate!==void 0&&{dueDate:e.dueDate},updatedAt:new Date().toISOString()};return r[t]=i,i},h=async e=>{await n(200);const t=r.findIndex(i=>i.id===e);if(t===-1)throw new Error("Ticket not found");r.splice(t,1)},I=async()=>{await n(300);const e=l();return{assigned:r.filter(t=>t.assigneeId===e),reported:r.filter(t=>t.reporterId===e)}},k=async()=>(await n(200),{total:r.length,open:r.filter(e=>e.status==="open").length,inProgress:r.filter(e=>e.status==="in-progress").length,closed:r.filter(e=>e.status==="closed").length,byPriority:{critical:r.filter(e=>e.priority==="critical").length,high:r.filter(e=>e.priority==="high").length,medium:r.filter(e=>e.priority==="medium").length,low:r.filter(e=>e.priority==="low").length}}),S=e=>c({queryKey:o.list(e),queryFn:()=>g(e),staleTime:3e4}),q=()=>c({queryKey:["tickets","my"],queryFn:I,staleTime:3e4}),p=()=>c({queryKey:["tickets","stats"],queryFn:k,staleTime:6e4}),v=()=>{const e=u();return a({mutationFn:t=>f(t),onSuccess:()=>{e.invalidateQueries({queryKey:o.lists()}),e.invalidateQueries({queryKey:["tickets","my"]}),e.invalidateQueries({queryKey:["tickets","stats"]})}})},K=()=>{const e=u();return a({mutationFn:t=>w(t),onSuccess:t=>{e.invalidateQueries({queryKey:o.lists()}),e.setQueryData(o.detail(t.id),t),e.invalidateQueries({queryKey:["tickets","my"]}),e.invalidateQueries({queryKey:["tickets","stats"]})}})},Q=()=>{const e=u();return a({mutationFn:t=>h(t),onSuccess:()=>{e.invalidateQueries({queryKey:o.lists()}),e.invalidateQueries({queryKey:["tickets","my"]}),e.invalidateQueries({queryKey:["tickets","stats"]})}})};export{q as a,S as b,K as c,Q as d,v as e,p as u};
