import{j as e}from"./vendor-query-30WTYxUa.js";import{T as r,u as x}from"./index-qdssDWYQ.js";import{u as j,a as p}from"./useTickets-l-PqA1f4.js";import{R as u,P as v,a as b,C as d,T as c,B as g,X as N,Y as y,b as f}from"./vendor-charts-D9fTa4NR.js";import"./vendor-react-3BJtw-ek.js";import"./queryKeys-D-dtdCA2.js";const n=({label:i,value:a,icon:l})=>e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",children:a}),e.jsxs("div",{className:"stat-label",children:[l&&e.jsx("span",{className:"stat-icon",children:l}),i]})]}),t=({title:i,data:a,type:l})=>e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{children:i}),e.jsx(u,{width:"100%",height:250,children:l==="pie"?e.jsxs(v,{children:[e.jsx(b,{data:a,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"value",label:({name:s,value:o})=>`${s}: ${o}`,children:a.map((s,o)=>e.jsx(d,{fill:s.color},`cell-${o}`))}),e.jsx(c,{})]}):e.jsxs(g,{data:a,children:[e.jsx(N,{dataKey:"name"}),e.jsx(y,{allowDecimals:!1}),e.jsx(c,{}),e.jsx(f,{dataKey:"value",children:a.map((s,o)=>e.jsx(d,{fill:s.color},`cell-${o}`))})]})})]}),M=({tickets:i,title:a,viewAllLink:l})=>e.jsxs("div",{className:"dashboard-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:a}),l&&e.jsx("a",{href:l,className:"link",children:"View All â†’"})]}),e.jsx("div",{className:"ticket-list-mini",children:i&&i.length>0?i.slice(0,5).map(s=>e.jsxs("div",{className:"ticket-item-mini",children:[e.jsxs("div",{className:"ticket-info",children:[e.jsxs("span",{className:"ticket-id",children:["#",s.id]}),e.jsx("span",{className:"ticket-title",children:s.title})]}),e.jsx("span",{className:`priority-badge priority-${s.priority}`,children:s.priority})]},s.id)):e.jsxs("div",{className:"empty-mini",children:["No ",r.items.toLowerCase()," found"]})})]}),E=()=>{const{user:i}=x(),{data:a,isLoading:l}=j(),{data:s,isLoading:o}=p();if(l||o)return e.jsx("div",{className:"loading",children:"Loading dashboard..."});const h=[{name:"Open",value:(a==null?void 0:a.open)||0,color:"#10b981"},{name:"In Progress",value:(a==null?void 0:a.inProgress)||0,color:"#f59e0b"},{name:"Closed",value:(a==null?void 0:a.closed)||0,color:"#6b7280"}],m=[{name:"Critical",value:(a==null?void 0:a.byPriority.critical)||0,color:"#ef4444"},{name:"High",value:(a==null?void 0:a.byPriority.high)||0,color:"#f97316"},{name:"Medium",value:(a==null?void 0:a.byPriority.medium)||0,color:"#eab308"},{name:"Low",value:(a==null?void 0:a.byPriority.low)||0,color:"#22c55e"}];return e.jsxs("div",{className:"dashboard-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:["Welcome back, ",i==null?void 0:i.firstName,"!"]}),e.jsxs("p",{className:"page-subtitle",children:["Here's an overview of your ",r.items.toLowerCase()]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx(n,{label:"Assigned to Me",value:(s==null?void 0:s.assigned.length)||0}),e.jsx(n,{label:"Reported by Me",value:(s==null?void 0:s.reported.length)||0}),e.jsx(n,{label:`Total ${r.ITEMS}`,value:(a==null?void 0:a.total)||0}),e.jsx(n,{label:`Open ${r.ITEMS}`,value:(a==null?void 0:a.open)||0})]}),e.jsxs("div",{className:"charts-grid",children:[e.jsx(t,{title:`${r.ITEMS} by Status`,data:h,type:"pie"}),e.jsx(t,{title:`${r.ITEMS} by Priority`,data:m,type:"bar"})]}),e.jsx(M,{tickets:s==null?void 0:s.assigned,title:`My Assigned ${r.ITEMS}`,viewAllLink:r.ROUTES.MY_TICKETS})]})};export{E as default};
